         MACRO ,
         IGGCCX ,
*/********************************************************************/
*/*                                                                  */
*/*   MACRO NAME = IGGCCX                                            */
*/*                                                                  */
*/*   DESCRIPTIVE NAME = CATALOG COMMUNICATIONS AREA EXTENSION       */
*/*                                                                  */
*/*   FUNCTION = THE CCX IS BUILT AND INITIALIZED IN CSA BY THE      */
*/*              CAS INTERFACE MODULE.  IT IS USED TO IDENTIFY A     */
*/*              CAS REQUEST AND CONTAINS THE REQUESTOR'S ASID,      */
*/*              TCB, ASCB, CCA, AND OTHER REQUIRED INFORMATION.     */
*/*              THE CCX IS POINTED TO BY THE CRT (CRTCCXPT).        */
*/*                                                                  */
*/********************************************************************/

IGGCCX   DSECT ,
CCXID    DS    CL3             CCX IDENTIFIER = 'CCX'
         DS    XL1             RESERVED
CCXSZ    DS    XL2             SIZE OF THE CCX
         DS    XL2             RESERVED
CCXCCX   DS    XL4             CCX INDEX IN CRTTABLE
CCXTCB   DS    A               CALLER'S TCB
CCXRB    DS    A               CALLER'S RB
CCXASID  DS    A               CALLER'S ASID
CCXSRB   DS    A               IGG0CLHC SRB
CCXPSSRB DS    A               SRB ROUTINE ENTRY POINT
CCXPRMTR DS    A               RMTR ROUTINE
CCXOASCB DS    A               CALLER'S ASCB
CCXNPCCB DS    A               CAS PCCB
CCXOPCCB DS    A               CALLER'S PCCB
CCXCWAP  DS    A               CALLER'S WORK AREA
CCXCIFP  DS    A               RECALL PARAMETER ADDRESS
CCXPCTOK DS    A               PCLINK TOKEN
CCXCLX13 DS    A               IGG0CLAH REGISTER 13
CCXR11S  DS    A               SAVE REGISTER 11
CCXR14S  DS    A               SAVE REGISTER 14
CCXECB   DS    A               SERVICE TASK ECB WHICH CONTAINS RETURN
*                              OR COMPLETION CODE WHEN TASK TERMINATES
CCXNCPL  DS    A               CAS CPL
CCXOCPL  DS    A               CALLER'S CPL
CCXNOFLD DS    A               CALLER'S CTGNOFLD VALUE
CCXNCCA  DS    A               CAS CCA
CCXOCCA  DS    A               CALLER'S CCA
CCXFLG   DS    XL1             CCX FLAGS:
CCXBCISA EQU   B'10000000'     BIG CISA NEEDED FOR LISTCAT
CCXSKYSS EQU   B'01000000'     SYSTEM KEY OR SUPERVISOR STATE REQUIRED
CCXGDGUY EQU   B'00100000'     GOOD GUY
CCXRESUM EQU   B'00010000'     CCX CAN BE RESUMED
CCXCASRQ EQU   B'00001000'     CCX IS ON REQUEST QUEUE
CCXCASPQ EQU   B'00000100'     CCX IS ON PROCESS QUEUE
CCXCASAQ EQU   B'00000010'     CCX IS ON AVAILABLE QUEUE
CCXCASAP EQU   B'00000001'     CCX IS ACTIVE
CCXUSKEY DS    XL1             USER KEY
CCXERR   DS    XL1             ERROR INDICATOR
CCXBUKEY DS    XL1             SAVE USER KEY
CCXRCLWK DS    0XL80           RECALL WORK AREA
CCXRECAL DS    XL1             RECALL FUNCTION:
*                              X'01'  DEQ TOPT
*                              X'02'  DYNAMIC CATALOG OPEN
*                              X'03'  DYNAMIC ALLOCATION
*                              X'04'  SECURITY VERIFICATION
*                              X'05'  FIND CI TOKEN
*                              X'06'  FIND CI NAME
*                              X'07'  ENQ
*                              X'08'  DEQ
*                              X'09'  RESERVE
*                              X'0A'  UCRA EXCP
*                              X'0B'  RENAME
*                              X'0C'  ERASE
*                              X'0D'  VSAM CRA DYNAMIC ALLOCATION
*                              X'0E'  ALLOCATE SVC
*                              X'0F'  EXTENDED DADSM CALL
CCXMVFLG DS    XL1             DATA MOVE FLAG:
CCXMPFLG EQU   B'10000000'     MOVE TO CAS:  0=NO MOVE  1=MOVE DATA
CCXMSFLG EQU   B'01000000'     MOVE TO USER: 0=NO MOVE  1=MOVE DATA
*              B'00111111'     RESERVED
CCXSECFG DS    XL1             SECURITY PROCESSING FLAG
         DS    XL1             RESERVED
CCXMSLEN DS    XL2             MVCS LENGTH
         DS    XL2             RESERVED
CCXMSTO  DS    A               MVCS TO ADDR
CCXMSFRM DS    A               MVCS FROM ADDR
CCXMPLEN DS    XL2             MVCP LENGTH
         DS    XL2             RESERVED
CCXMPFRM DS    A               MVCP FROM ADDR
CCXMPTO  DS    A               MVCP TO ADDR
CCXMDATA DS    0XL52           MORE PARAMETER DATA
CCXNOPTR DS    XL1             NUMBER OF POINTERS IN THE PARAMTER LIST
         DS    XL3             RESERVED
CCXPMOVE DS    0XL36           MOVED PARAMETERS
CCXPMPTR DS    A               POINTER IN PARAMETER LIST
CCXPMLEN DS    XL2             LENGTH OF DATA
         DS    XL30
CCXREGLT DS    0XL12           REGISTERS FOR RECALL
CCXPMREG DS    XL4             REGISTER
         DS    XL8
CCXWORK  DS    0XL48           CAS WORK AREA
CCXNXTBK DS    A               SAVE NEXT BLOCK
CCXRMBYT DS    A               SAVE NEXT BLOCK
CCXPROB  DS    A               PROBLEM DETERMINATION AND RECALL
CCXPROB2 DS    XL4             RECALL RETURN CODE
CCXTQDB  DS    A               COPIED DSABS QDB POINTER
CCXDDNM  DS    A               DDNAME POINTER
CCXWPTR  DS    0A              JFCB WORK AREA POINTER
         DS    XL1             SWA TYPE
CCXWTTR  DS    AL3             JFCB POINTER
CCXEFLG  DS    XL4             EXTRA FLAG:
CCXF1EQ  EQU   B'10000000'     0=DEQ,  1=FLAG2
CCXF2EQ  EQU   B'01000000'     0=ENQ,  1=RSV
CCXTDEQ  EQU   B'00100000'     TIOT DEQUEUE INDICATOR: 0=NO,  1=YES
CCXDCLU  EQU   B'00010000'     DEQUEUE CLEANUP INDICATOR SET BY ETX1 IF
*                              DEQ RECALL COULD NOT BE PERFORMED
CCXPURGE EQU   B'00001000'     SRB SCHEDULE IS NOT ALLOWED
CCXTERM  EQU   B'00000100'     TERMINATE SERVICE TASK
CCXWAIT  EQU   B'00000010'     PUT CCX ON THE WAIT QUEUE
CCXREST  EQU   B'00000001'     RESTART FLAG
CCXEQDQ1 DS    A               PARAMETER LIST WORD 1
CCXEQDQ2 DS    A               PARAMETER LIST WORD 2
CCXEQDQ3 DS    A               PARAMETER LIST WORD 3
CCXEQDQ4 DS    A               PARAMETER LIST WORD 4
CCXREGS  DS    XL72            SAVE AREA
CCXEDR6  DS    A               EQDQ PARAMETER LIST POINTER
CCXEDR8  DS    A               EQDQ REGISTER 8 SAVE
CCXEDR11 DS    A               EQDQ CCA POINTER
CCXUCB   DS    A               UCB ADDRESS
CCXTSOPW DS    A               TSO PASSWORD POINTER
CCXUSVRD DS    A               USVR DATA POINTER
CCXUSVRN DS    A               USVR NAME POINTER
CCXUSVRL DS    XL4             USVR LENGTH
CCXLCICB DS    XL4             CICB LENGTH
CCXOCICB DS    A               CICB POINTER
CCXQNAME DS    CL8             QNAME
CCXRNAME DS    CL44            RNAME
CCXCAS1  DS    0XL72           SRB SAVE AREA, ATTACH PARAMTER LIST, AND
*                              RMF PARAMETERS
CCXSTIME DS    XL8             SYSEVENT START TIME
CCXSSID  DS    XL8             SYSEVENT SUBSYSTEM ID
CCXSTID  DS    XL8             SYSEVENT TRANSACTION ID
CCXSUID  DS    XL8             SYSEVENT USER ID
CCXSTCL  DS    XL8             SYSEVENT CLASS
CCXSTCB  DS    XL32            SYSEVENT EXTRA
CCXCAS2  DS    XL24            SAVE AREA2
CCXCAS3  DS    XL24            SAVE AREA3
CCXCAS4  DS    XL24            SAVE AREA4
CCXNTIO  DS    A               CAS TIOT COPY POINTER
CCXOTIO  DS    A               CALLER'S TIOT POINTER
CCXLTIO  DS    XL4             LENGTH OF TIOT
CCXOCVOL DS    A               REQUEST CVOL
CCXNCVOL DS    A               CAS CVOL POINTER
CCXOSCWA DS    A               REQUEST SCHWA POINTER
CCXNSCWA DS    A               CAS SEARCH CATALOG WORK AREA POINTER
CCXTPTR  DS    A               CAS TEMPORARY POINTER
CCXACB   DS    A               CATALOG ACB
CCXRETWA DS    0XL12           DYNAMIC ALLOCATION RETURN AREA
CCXDDNAM DS    CL8             DDNAME RETURNED
CCXR15   DS    XL4             RETURN CODE IN REGISTER 15
CCXCAST  DS    A               CAS SERVICE TASK TCB ADDRESS
CCXJSCB  DS    A               POINTER TO SERVICE TASK COPIED JSCB
CCXQDB   DS    XL32            USER QDB
CCXWKA   DS    0XL8            TEMPORARY WORK AREA
CCXWKFLG DS    XL1             TEMPORARY FLAG:
CCXF1LPS EQU   B'10000000'     LOOP FLAG IN CROSS-MEMORY
*              B'01111111'     RESERVED
         DS    XL7             RESERVED
CCXTIME  DS    XL8             STCLK TIME VALUE
CCXCASID DS    A               CAS ASID
CCXCASCB DS    A               CAS ASCB POINTER
CCXWTOR  DS    0XL4            WTOR FLAGS AND ID
CCXWTORF DS    XL1             WTOR FLAGS:
CCXWTORP EQU   B'10000000'     WTOR IN-PROGRESS FLAG
*              B'01111111'     RESERVED
CCXWTORI DS    XL3             WTOR ID NUMBER
CCXCITKN DS    0XL3            CI TOKEN
CCXCISTN DS    XL1             CIST TABLE NUMBER
CCXCIOF  DS    XL2             CIST OFFSET
CCXSNAM  DS    0XL46           CIS NAME
CCXCISLN DS    XL1             CIS LENGTH
CCXCISNM DS    XL45            KEY MAP
         DS    XL3             RESERVED
CCXLCCX  DS    A               SRR LOCK CHAIN
CCXLASCB DS    A               SRR LOCK ASCB
CCXLTCB  DS    A               SRR LOCK TCB
CCXLASID DS    A               SRR LOCK ASID
CCXLOCK  DS    A               SRR LOCK HEADER ADDRESS
CCXEMR1  DS    A               EMSG REGISTER 1 SAVE
CCXEMR2  DS    A               EMSG REGISTER 2 SAVE
CCXFLAGS DS    0XL4            CCX FLAGS
CCXFLAG3 DS    XL1             FLAG BYTE 3:
CCXRBTCB EQU   B'10000000'     ON = CALLER RB POINTS TO XRBLNK (TCB)
CCXNWTCB EQU   B'01000000'     NEWLY ATTACHED TCB
CCXLKTCB EQU   B'00100000'     RESUME FROM LOCK ROUTINE
CCXRECUR EQU   B'00010000'     RECURSIVE SVC 26 IN CAS MEMORY
CCXADSP  EQU   B'00001000'     ADSP ATTRIBUTE
CCXBPASS EQU   B'00000100'     SECURITY BYPASS
*              B'00000011'     RESERVED
         DS    XL3             RESERVED
CCXLOCKX DS    XL2             LOCK HELD FLAGS:
CCXLOCK1 EQU   B'10000000'     CAS LOCK 1 HELD
CCXLOCK2 EQU   B'01000000'     CAS LOCK 2 HELD
CCXLOCK3 EQU   B'00100000'     CAS LOCK 3 HELD
CCXLOCK4 EQU   B'00010000'     CAS LOCK 4 HELD
CCXLOCK5 EQU   B'00001000'     CAS LOCK 5 HELD
CCXLOCK6 EQU   B'00000100'     CAS LOCK 6 HELD
CCXLOCK7 EQU   B'00000010'     CAS LOCK 7 HELD
CCXLOCK8 EQU   B'00000001'     CAS LOCK 8 HELD
CCXLOCK9 EQU   B'10000000'     CAS LOCK 9 HELD
CCXLOCKA EQU   B'01000000'     CAS LOCK A HELD
CCXLOCKB EQU   B'00100000'     CAS LOCK B HELD
CCXLOCKC EQU   B'00010000'     CAS LOCK C HELD
CCXLOCKD EQU   B'00001000'     CAS LOCK D HELD
CCXLOCKE EQU   B'00000100'     CAS LOCK E HELD
CCXLOCKF EQU   B'00000010'     CAS LOCK F HELD
*              B'00000001'     RESERVED
         DS    XL2             RESERVED
CCXDDND  DS    A               DATA DDNAME
CCXDDNI  DS    A               INDEX DDNAME
CCXCAS2A DS    XL24            SAVE AREA2A IGG0CLHB
CCXCAS2B DS    XL4             SAVE INTERNAL CCX   IGG0CLX0
CCXCAS3B DS    XL4             CCXTPTR2  IGG0CLX0
CCXCAS2C DS    XL24            SAVE AREA2C IGG0CLXA
CCXCAS2D DS    XL24            SAVE AREA2D IGG0CLXA
CCXCAS2E DS    XL24            SAVE AREA2E IGG0CLXA
CCXCAS2F DS    XL24            SAVE AREA2F IGG0CLXE
CCXCAS2G DS    XL72            SAVE AREA2G IGG0CLHB
CCXCAS2H DS    XL72            SAVE AREA2H IGG0CLXA
CCXTOKEN DS    XL4             PC TOKEN IGG0CLXA
CCXEND   EQU   *               END OF CCX
         MEND  ,
